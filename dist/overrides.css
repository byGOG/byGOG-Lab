/* Header shape + centered search overrides */
.site-header{border-radius:28px;overflow:hidden}
.logo-container{position:relative;z-index:1}
.search-container{position:absolute;left:50%;transform:translateX(-50%);margin-left:0;flex:none;width:min(720px,60vw);max-width:720px}
/* Parallax-ready: add vertical scroll translation via CSS var */
.search-container[data-parallax="true"]{will-change:transform;transform:translateX(-50%) translateY(calc(var(--search-parallax,0) + var(--search-bob,0)))}
/* Header parallax support */
.site-header[data-parallax="true"]{will-change:transform;transform:translateY(var(--header-parallax,0))}
@media (prefers-reduced-motion: reduce){
  .search-container[data-parallax="true"]{transform:translateX(-50%) translateY(0)}
  .site-header[data-parallax="true"]{transform:translateY(0)}
}
/* Global layout safety nets */
html{box-sizing:border-box}
*,*::before,*::after{box-sizing:inherit}
html,body{max-width:100%;overflow-x:hidden}
/* Preserve natural order; no dense reflow */
ul{grid-auto-flow:row}
li{min-width:0}
@media (max-width:900px){
  .search-container{width:min(640px,70vw)}
}
@media (max-width:720px){
  .search-container{position:static;width:100%;max-width:100%}
}

/* Restore vertical motion on mobile/full-width layout */
@media (max-width:720px){
  .search-container[data-parallax="true"]{transform:translateY(calc(var(--search-parallax,0) + var(--search-bob,0)))}
}

/* Mobile responsiveness improvements */
@media (max-width:720px){
  .container{padding:16px 16px 56px}
  .site-header{gap:16px;padding:12px 0 10px;border-radius:20px}
  .logo{max-height:72px}
  .author-fab{right:16px;bottom:16px}
}

@media (max-width:420px){
  .container{padding:12px 12px 56px}
  .logo{max-height:64px}
  /* Slightly compact link items on very small screens */
  ul{gap:10px}
  a{padding:10px 12px}
}

/* Ensure cards always fit on narrow viewports */
@media (max-width:480px){
  ul{grid-template-columns:1fr}
  li{min-width:0}
  .icon-wrapper{margin-right:12px}
  .site-icon{width:24px;height:24px}
  a{font-size:15px}
  /* Avoid off-screen overlays on tiny viewports */
  .custom-tooltip{display:none}
}

/* Resolution-based layout */
/* 1 column on small phones */
@media (max-width:480px){
  ul{grid-template-columns:1fr}
  li{min-width:0}
}
/* 2 columns on phones/phablets */
@media (min-width:481px) and (max-width:768px){
  ul{grid-template-columns:repeat(2,minmax(0,1fr))}
  li{min-width:0}
}
/* 3 columns on tablets/smaller laptops */
@media (min-width:769px) and (max-width:1200px){
  ul{grid-template-columns:repeat(3,minmax(0,1fr))}
  li{min-width:0}
}
/* Let the base grid handle ≥769px (auto-fit with min 240px) */

/* Single-line truncation with ellipsis for long site names */
.link-text{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  overflow-wrap: normal;
  word-break: normal;
}

/* Marquee: activate single-line during hover/focus animation */
.link-text.marquee-active{
  white-space: nowrap;
}

/* Continuous auto marquee (no markup shifts) */
.link-text.marquee-auto{
  white-space: nowrap;
  overflow: hidden; /* already set in base, keep safe */
  position: relative;
}
.link-text .marquee-inner{
  display: inline-block;
  will-change: transform;
}
.link-text .marquee-copy{ display: inline-block; }
.link-text .marquee-gap{ display: inline-block; }

@media (max-width:360px){
  .site-icon{width:22px;height:22px}
  a{font-size:14px;padding:9px 10px}
}

/* Final overrides: mobile ergonomics (≤768px) */
@media (max-width:768px){
  li{min-width:0}
  /* Avoid overlay and center-compression on mobile */
  .site-header{position:static;top:auto}
  .container{align-items:stretch}
  li{justify-content:flex-start}
  /* Tighter typographic scale on mobile */
  h2{font-size:20px;margin-top:24px;padding-bottom:6px}
  h3{font-size:17px;margin-top:16px;padding-bottom:4px}
  ul{gap:8px}
  a{padding:9px 12px}
  .site-header{margin-bottom:12px!important}
}
@media (max-width:720px){
  .logo{max-height:60px}
}

/* Columns by resolution across platforms */
/* 1 column on small phones */
@media (max-width:480px){
  ul{grid-template-columns:1fr}
  li{min-width:0}
}
/* Force single column a bit wider to keep items strictly stacked */
@media (max-width:600px){
  ul{grid-template-columns:1fr !important}
  li{min-width:0}
}
/* 2 columns on phones/phablets/tablets */
@media (min-width:481px) and (max-width:900px){
  ul{grid-template-columns:repeat(2,minmax(0,1fr))}
  li{min-width:0}
}

/* Copy button sizing: slightly smaller */
button.copy-button{
  width:32px;
  height:32px;
  border-radius:10px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0;
}
button.copy-button svg{
  width:16px;
  height:16px;
}
@media (max-width:600px){
  button.copy-button{ width:30px; height:30px; }
  button.copy-button svg{ width:15px; height:15px; }
}

/* Modern hover/focus tooltips */
/* Make anchor allow overlays */
.category-card a{ overflow: visible; }

/* Hidden by default (no layout shift) */
a .custom-tooltip{
  position:absolute;
  right:48px; /* keep clear of copy button */
  top:50%;
  transform: translateY(-50%) translateX(6px) scale(.98);
  background: var(--card-bg);
  color: var(--text);
  border: 1px solid var(--card-border);
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 12px 28px rgba(0,0,0,0.55), 0 2px 8px rgba(27,33,44,0.35);
  max-width: 380px;
  white-space: normal;
  line-height: 1.35;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity .18s ease, transform .18s ease, visibility .18s;
}
/* Show anchor-level tooltip only via focus (hover disabled elsewhere) */
a:focus-within .custom-tooltip{
  opacity: 1;
  visibility: visible;
  transform: translateY(-50%) translateX(0) scale(1);
}
a .custom-tooltip img{
  width: 24px;
  height: 24px;
  border-radius: 6px;
  margin-right: 8px;
  vertical-align: middle;
}
/* Raise hovered/focused item to ensure tooltip is above neighbors */
.category-card a:hover,
.category-card a:focus-within{ position: relative; z-index: 1200; }


/* Info button styles (compact, next to copy) */
button.info-button{
  width:32px;
  height:32px;
  border-radius:10px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0;
  margin-left:8px;
  background: var(--copy-btn-bg, transparent);
  color: var(--copy-btn-color, currentColor);
  border: 1.5px solid var(--card-border);
  box-shadow: 0 1.5px 4px 0 var(--copy-btn-shadow, rgba(0,0,0,0.2));
  cursor: pointer;
}
button.info-button:hover{
  box-shadow: 0 8px 28px 0 var(--copy-btn-hover-shadow, rgba(0,0,0,0.6));
}
button.info-button:focus{
  outline: 2px solid var(--copy-btn-focus-outline, #ffd600);
  outline-offset: 2px;
}
button.info-button svg{ width:16px; height:16px; }
@media (max-width:600px){
  button.info-button{ width:30px; height:30px; }
  button.info-button svg{ width:15px; height:15px; }
}

/* New info tooltip (for info button) */
.info-tooltip{
  position:absolute;
  right:56px;
  top:50%;
  transform: translateY(-50%) translateX(6px) scale(.98);
  background: var(--card-bg);
  color: var(--text);
  border: 1px solid var(--card-border);
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 12px 28px rgba(0,0,0,0.55), 0 2px 8px rgba(27,33,44,0.35);
  max-width: 380px;
  white-space: normal;
  line-height: 1.35;
  z-index: 1400;
  opacity: 0; visibility: hidden; pointer-events: none;
  transition: opacity .18s ease, transform .18s ease, visibility .18s;
}
.info-tooltip img{ width: 24px; height: 24px; border-radius: 6px; margin-right: 8px; vertical-align: middle; }
.info-tooltip .info-name{
  font-weight: 600;
  color: var(--h3);
  margin-right: 6px;
}

/* Show only when toggled open (click) */
li.info-open .info-button + .info-tooltip{
  opacity: 1; visibility: visible; pointer-events: auto; transform: translateY(-50%) translateX(0) scale(1);
}

/* Hovering the site name should NOT show tooltip (click info button instead) */

/* Ensure card allows overlay and stacks above neighbors */
.category-card a{ overflow: visible; }
.category-card a:hover, .category-card a:focus-within{ z-index: 1600; }

/* Monochrome mask for SVG icons so they are visible on dark bg */
.site-icon-mask{
  background-color: var(--text);
  -webkit-mask: var(--icon-url) center/contain no-repeat;
  mask: var(--icon-url) center/contain no-repeat;
}

/* Hide anchor's built-in hover tooltip; use info-button tooltip instead */
a .custom-tooltip{ display:none !important; }

/* Do not show per-link info tooltip; we render a global flyout instead */
.category-card .info-tooltip{ display:none !important; }

/* Global info flyout (bottom-right) */
.info-flyout{
  position: fixed;
  left: 24px;
  right: auto;
  bottom: 24px;
  transform: translateY(6px) scale(.98);
  background: var(--card-bg);
  color: var(--text);
  border: 1px solid var(--card-border);
  border-radius: 12px;
  padding: 12px 14px;
  box-shadow: 0 16px 36px rgba(0,0,0,0.55), 0 4px 12px rgba(27,33,44,0.35);
  max-width: min(520px, calc(100vw - 32px));
  max-height: min(50vh, 420px);
  overflow: auto;
  line-height: 1.35;
  z-index: 3000;
  opacity: 0; visibility: hidden; pointer-events: none;
  transition: opacity .18s ease, transform .18s ease, visibility .18s;
}
.info-flyout.show{
  opacity: 1; visibility: visible; pointer-events: auto; transform: translateY(0) scale(1);
}
.info-flyout img{ width: 24px; height: 24px; border-radius: 6px; margin-right: 8px; vertical-align: middle; }
.info-flyout .info-name{ font-weight: 600; color: var(--h3); margin-right: 6px; }
@media (max-width:600px){ .info-flyout{ left: 12px; right: auto; max-width: calc(100vw - 24px); } }

/* Recommended section: force 4 columns on wide screens */
@media (min-width:1200px){
  .category-card:first-of-type > ul{ grid-template-columns:repeat(3,minmax(0,1fr)); }
}
